# Travel Pay API Endpoint Versions
# 
# This configuration controls which API version each Travel Pay endpoint uses.
# The Travel Pay API uses per-endpoint versioning, so each endpoint can be
# independently upgraded from v2 to v3.
#
# Only claims and documents resources support dynamic version management.
# Other resources (tokens, expenses, appointments) use hardcoded endpoints
# in their respective client classes.
#
# Usage:
#   TravelPay::ApiVersions.versions_for(resource: :claims, user: current_user)
#   TravelPay::ApiVersions.versions_for(resource: :documents, user: current_user)
#
# Valid values: 'v2', 'v3'

# Feature flag overrides - checked first before config values
# If the feature flag is enabled (globally or per-user), use v3
feature_flag_overrides:
  claims:
    get_all: :travel_pay_claims_api_v3_upgrade
    get_by_id: :travel_pay_claims_api_v3_upgrade
    get_by_date: :travel_pay_claims_api_v3_upgrade
    create: :travel_pay_claims_api_v3_upgrade
    submit: :travel_pay_claims_api_v3_upgrade
  documents:
    get_document_ids: :travel_pay_claims_api_v3_upgrade
    get_document_binary: :travel_pay_claims_api_v3_upgrade

# Base configuration - stable endpoint versions
claims:
  get_all: v2                    # GET /api/v2/claims
  get_by_id: v2                  # GET /api/v2/claims/:id
  get_by_date: v2                # GET /api/v2/claims/search-by-appointment-date
  create: v2                     # POST /api/v2/claims
  submit: v2                     # PATCH /api/v2/claims/:id/submit

documents:
  get_document_ids: v2           # GET /api/v2/claims/:id/documents
  get_document_binary: v2        # GET /api/v2/claims/:claim_id/documents/:doc_id
  add_document: v3               # POST /api/v3/claims/:id/documents/form-data (already v3)
  delete_document: v1            # DELETE /api/v1/claims/:claim_id/documents/:doc_id (v1!)
