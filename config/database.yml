default: &default
  adapter: postgis
  encoding: unicode
  pool: <%= ENV.fetch('RAILS_MAX_THREADS') { 5 } %>

development:
  primary:
    url: <%= Settings.database_url %>
  audit:
    url: <%= "#{Settings.audit_db.url}_development" %>
    migrations_paths: db/audit_migrate

test:
  primary:
    url: <%= Settings.test_database_url %><%= ENV['TEST_ENV_NUMBER'] %>
  audit:
    url: <%= "#{Settings.audit_db.url}_test#{ENV['TEST_ENV_NUMBER']}" %>
    migrations_paths: db/audit_migrate

production:
  primary:
    url: <%= Settings.database_url %>
    connect_timeout: 5
    variables:
      statement_timeout: <%= ENV["STATEMENT_TIMEOUT"] || "60s" %>
      lock_timeout: 15s
  audit:
    url: <%= "#{Settings.audit_db.url}" %>
    migrations_paths: db/audit_migrate
    database_tasks: false
