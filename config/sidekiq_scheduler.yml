# Use `cron` or `at` option to specify that a job should run as scheduled once
# over all workers. The `every` option will run the job once per worker instance
# at the specified interval.


###########################
# PERIODIC JOBS ARE REPLACING SIDEKIQ SCHEDULER

# Please add new periodic jobs in lib/periodic_jobs.rb

CreateDailySpoolFiles:
  cron: "0 3 * * MON-FRI America/New_York"
  class: EducationForm::CreateDailySpoolFiles
  description: "Generate a daily set of spool files and transmit them over SFTP to a backend system"

CovidVaccine::ExpandedScheduledSubmissionJob:
  every: '15m'
  class: CovidVaccine::ExpandedScheduledSubmissionJob
  description: Iterates vaccine records with state=enrollment_pending and attempts MPI lookup and send to Vetext.

CovidVaccine::ExpandedSubmissionStateJob:
  every: '1h'
  class: CovidVaccine::ExpandedSubmissionStateJob
  description: Logs count of states in the covid_vaccine_expanded_registration_submissions table.

CovidVaccine::ScheduledBatchJob:
  cron: "*/15 * * * * America/New_York"
  class: CovidVaccine::ScheduledBatchJob

EducationForm::Process10203Submissions:
  cron: "0 6-18/6 * * * America/New_York"
  class: EducationForm::Process10203Submissions
  description: "Go through 22-10203 submissions and determine if application should be processed as part of normal submission process or rejected"

SidekiqAlive::CleanupQueues:
  cron: "*/30 * * * * America/New_York"
  class: SidekiqAlive::CleanupQueues
  description: "Cleanup Sidekiq Alive Zombie Queues"

VRE::CreateCh31SubmissionsReportJob:
  cron: "0 0 * * * America/New_York"
  include_metadata: true
  description: "Send a daily report to the VRE team about Chapter 31 submissions"

