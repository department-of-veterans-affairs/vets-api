<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style>
      body {
        font-family: sans-serif;
        font-size: smaller;
      }
      table {
        border-collapse: collapse;
      }
      table tr th, table tr td {
        border: 1px solid #d3d3d3;
        padding: 10px;
      }
      table tr th {
        padding: 5px 10px;
        white-space: nowrap;
        color: #808080;
        font-size: smaller;
        text-transform: uppercase;
        font-weight: normal;
        text-align: left;
      }
      table tr td {
        padding: 5px 10px;
        vertical-align: top;
      }
      table tr td.right-align {
        text-align: right;
      }
      h2 {
        margin: 30px 0 2px;
      }
      h2 span.title {
        color: #808080;
      }
    </style>
  </head>

  <body>
    <h1>Decision Review Report from <%= @report.from %> -- <%= @report.to %> </h1>

    <h2><span class="title">HLR submissions by status and count</span></h2>
    <table>
      <thead>
        <tr>
            <th>Status</th>
            <th>Count</th>
        </tr>
      </thead>
      <tbody>
        <% @report.hlr_by_status_and_count.each do |status, count| %>
          <tr>
            <td class="right-align"><%= status %></td>
            <td class="right-align"><%= count %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <h2><span class="title">HLR Errors</span></h2>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>GUID</th>
          <th>Consumer</th>
          <th>Status</th>
          <th>Code</th>
          <th>Detail</th>
          <th>Created At</th>
          <th>Updated At</th>
        </tr>
      </thead>
      <tbody>
        <% @report.hlr_with_errors.each do |hlr| %>
          <tr>
            <td>HLR</td>
            <td class="right-align"><%= hlr.id %></td>
            <td class="right-align"><%= hlr.source %></td>
            <td class="right-align"><%= hlr.status %></td>
            <td class="right-align"><%= hlr.code %></td>
            <td class="right-align"><%= hlr.detail %></td>
            <td class="right-align"><%= hlr.created_at %></td>
            <td class="right-align"><%= hlr.updated_at %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <br />
    <hr />

    <h2><span class="title">NOD submissions by status and count</span></h2>
    <table>
      <thead>
        <tr>
            <th>Status</th>
            <th>Count</th>
        </tr>
      </thead>
      <tbody>
        <% @report.nod_by_status_and_count.each do |status, count| %>
          <tr>
            <td class="right-align"><%= status %></td>
            <td class="right-align"><%= count %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <h2><span class="title">NOD Errors</span></h2>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>GUID</th>
          <th>Consumer</th>
          <th>Status</th>
          <th>Code</th>
          <th>Detail</th>
          <th>Created At</th>
          <th>Updated At</th>
        </tr>
      </thead>
      <tbody>
        <% @report.nod_with_errors.each do |nod| %>
          <tr>
            <td>NOD</td>
            <td class="right-align"><%= nod.id %></td>
            <td class="right-align"><%= nod.source %></td>
            <td class="right-align"><%= nod.status %></td>
            <td class="right-align"><%= nod.code %></td>
            <td class="right-align"><%= nod.detail %></td>
            <td class="right-align"><%= nod.created_at %></td>
            <td class="right-align"><%= nod.updated_at %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

  </body>
</html>
