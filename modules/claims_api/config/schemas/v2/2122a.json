{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Form 2122a Schema",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "representative"
  ],
  "properties": {
    "veteran": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "address",
        "phone"
      ],
      "properties": {
        "vaFileNumber": {
          "description": "The Veteran's VA file number",
          "type": "string",
          "maxLength": 9
        },
        "serviceNumber": {
          "description": "The Veteran's Service Number",
          "type": "string",
          "maxLength": 9
        },
        "serviceBranch": {
          "description": "Service Branch for the veteran.",
          "type": "string",
          "enum": [
            "AIR FORCE",
            "ARMY",
            "COAST GUARD",
            "MARINE CORPS",
            "NAVY",
            "SPACE FORCE",
            "OTHER"
          ],
          "example": "ARMY"
        },
        "address": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "numberAndStreet",
            "city",
            "country",
            "zipFirstFive"
          ],
          "properties" : {
            "numberAndStreet": {
              "description": "Street address with number and name.",
              "type": "string",
              "pattern": "^([-a-zA-Z0-9'.,&#]([-a-zA-Z0-9'.,&# ])?)+$",
              "maxLength": 30
            },
            "aptUnitNumber": {
              "type": "integer",
              "maxLength": 5
            },
            "city": {
              "description": "City for the address.",
              "type": "string",
              "example": "Portland",
              "maxLength": 18
            },
            "state": {
              "description": "State for the address.",
              "type": "string",
              "example": "OR",
              "maxLength": 2
            },
            "country": {
              "description": "Country of the address.",
              "type": "string",
              "example": "US",
              "maxLength": 2
            },
            "zipFirstFive": {
              "description": "Zipcode (First 5 digits) of the address.",
              "type": "string",
              "pattern": "^\\d{5}?$",
              "example": "12345"
            },
            "zipLastFour": {
              "description": "Zipcode (Last 4 digits) of the address.",
              "type": "string",
              "pattern": "^\\d{4}?$",
              "example": "6789"
            }
          }
        },
        "phone": {
          "$comment": "the phone fields must not exceed 20 chars, when concatenated",
          "type": "object",
          "additionalProperties": false,
          "required": [
            "areaCode",
            "phoneNumber"
          ],
          "properties": {
            "countryCode":     { "type": "string", "pattern": "^[0-9]+$" },
            "areaCode": {
              "description": "Area code of the phone number.",
              "type": "string", "pattern": "^[2-9][0-9]{2}$",
              "example": "555"
            },
            "phoneNumber": {
              "description": "Phone number.",
              "type": "string", "pattern": "^[0-9]{1,14}$",
              "example": "555-5555"
            },
            "phoneNumberExt":  { "type": "string", "pattern": "^[a-zA-Z0-9]{1,10}$" }
          }
        },
        "email": {
          "description": "Email address of the veteran.",
          "type": "string",
          "pattern": ".@.",
          "maxLength": 61,
          "example": "veteran@example.com"
        }
      }
    },
    "claimant": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "firstName",
        "lastName",
        "address",
        "phone",
        "relationship"
      ],
      "properties": {
        "firstName": {
          "description": "First name of Claimant.",
          "type": "string",
          "example": "John",
          "maxLength": 12
        },
        "middleInitial": {
          "description": "Middle initial of Claimant.",
          "type": "string",
          "example": "M",
          "maxLength": 1
        },
        "lastName": {
          "description": "Last name of Claimant.",
          "type": "string",
          "example": "Dow",
          "maxLength": 18
        },
        "address": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "numberAndStreet",
            "city",
            "country",
            "zipFirstFive"
          ],
          "properties" : {
            "numberAndStreet": {
              "description": "Street address with number and name.",
              "type": "string",
              "pattern": "^([-a-zA-Z0-9'.,&#]([-a-zA-Z0-9'.,&# ])?)+$",
              "maxLength": 30
            },
            "aptUnitNumber": {
              "type": "integer",
              "maxLength": 5
            },
            "city": {
              "description": "City for the address.",
              "type": "string",
              "example": "Portland",
              "maxLength": 18
            },
            "state": {
              "description": "State for the address.",
              "type": "string",
              "example": "OR",
              "maxLength": 2
            },
            "country": {
              "description": "Country of the address.",
              "type": "string",
              "example": "US",
              "maxLength": 2
            },
            "zipFirstFive": {
              "description": "Zipcode (First 5 digits) of the address.",
              "type": "string",
              "pattern": "^\\d{5}?$",
              "example": "12345"
            },
            "zipLastFour": {
              "description": "Zipcode (Last 4 digits) of the address.",
              "type": "string",
              "pattern": "^\\d{4}?$",
              "example": "6789"
            }
          }
        },
        "phone": {
          "$comment": "the phone fields must not exceed 20 chars, when concatenated",
          "type": "object",
          "additionalProperties": false,
          "required": [
            "areaCode",
            "phoneNumber"
          ],
          "properties": {
            "countryCode":     { "type": "string", "pattern": "^[0-9]+$" },
            "areaCode": {
              "description": "Area code of the phone number.",
              "type": "string", "pattern": "^[2-9][0-9]{2}$",
              "example": "555"
            },
            "phoneNumber": {
              "description": "Phone number.",
              "type": "string", "pattern": "^[0-9]{1,14}$",
              "example": "555-5555"
            },
            "phoneNumberExt":  { "type": "string", "pattern": "^[a-zA-Z0-9]{1,10}$" }
          }
        },
        "email": {
          "description": "Email address of the claimant.",
          "type": "string",
          "pattern": ".@.",
          "maxLength": 61,
          "example": "claimant@example.com"
        },
        "relationship": {
          "description": "Relationship of claimant to the veteran.",
          "type": "string",
          "example": "Spouse"
        }
      }
    },
    "representative": {
      "description": "Details of the individual representative representing the veteran.",
      "type": "object",
      "additionalProperties": false,
      "required": [
        "poaCode",
        "registrationNumber",
        "type",
        "address"
      ],
      "properties": {
        "poaCode": {
          "description": "The POA code of the representative.",
          "type": "string",
          "example": "A1Q"
        },
        "registrationNumber": {
          "description": "The Registration Number of the representative",
          "type": "string",
          "example": "12345"
        },
        "type": {
          "description": "Type of individual representative",
          "type": "string",
          "enum": [
            "ATTORNEY",
            "AGENT",
            "INDIVIDUAL PROVIDING REPRESENTATION UNDER SECTION 14.630",
            "SERVICE ORGANIZATION REPRESENTATIVE"
          ],
          "example": "ATTORNEY"
        },
        "address": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "numberAndStreet",
            "city",
            "country",
            "zipFirstFive"
          ],
          "properties" : {
            "numberAndStreet": {
              "description": "Street address with number and name.",
              "type": "string",
              "pattern": "^([-a-zA-Z0-9'.,&#]([-a-zA-Z0-9'.,&# ])?)+$",
              "maxLength": 30
            },
            "aptUnitNumber": {
              "type": "integer",
              "maxLength": 5
            },
            "city": {
              "description": "City for the address.",
              "type": "string",
              "example": "Portland",
              "maxLength": 18
            },
            "state": {
              "description": "State for the address.",
              "type": "string",
              "example": "OR",
              "maxLength": 2
            },
            "country": {
              "description": "Country of the address.",
              "type": "string",
              "example": "US",
              "maxLength": 2
            },
            "zipFirstFive": {
              "description": "Zipcode (First 5 digits) of the address.",
              "type": "string",
              "pattern": "^\\d{5}?$",
              "example": "12345"
            },
            "zipLastFour": {
              "description": "Zipcode (Last 4 digits) of the address.",
              "type": "string",
              "pattern": "^\\d{4}?$",
              "example": "6789"
            }
          }
        },
        "organizationName": {
          "description": "Name of the service organization.",
          "type": "string",
          "example": "I help vets LLC."
        }
      },
      "if": { "properties": { "type": { "const":  "SERVICE ORGANIZATION REPRESENTATIVE" } } },
      "then": { "required":  ["organizationName"] }
    },
    "recordConsent": {
      "description": "AUTHORIZATION FOR REPRESENTATIVE'S ACCESS TO RECORDS PROTECTED BY SECTION 7332, TITLE 38, U.S.C.",
      "type": "boolean"
    },
    "consentLimits": {
      "description": "Consent in Item 19 for the disclosure of records relating to treatment for drug abuse, alcoholism or alcohol abuse, infection with the human immunodeficiency virus (HIV), or sickle cell anemia is limited as follows.",
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "DRUG ABUSE",
          "ALCOHOLISM",
          "HIV",
          "SICKLE CELL"
        ]
      },
      "example": "DRUG ABUSE"
    },
    "consentAddressChange": {
      "description": "AUTHORIZATION FOR REPRESENTATIVE TO ACT ON CLAIMANT'S BEHALF TO CHANGE CLAIMANT'S ADDRESS.",
      "type": "boolean"
    },
    "conditionsOfAppointment": {
      "description": "If the individual named in Item 15A is an accredited agent or attorney, the scope of representation provided before VA may be limited by the agent or attorney as indicated below in Item 23",
      "type": "array",
      "items": {
        "type": "string"
      }
    }
  }
}
