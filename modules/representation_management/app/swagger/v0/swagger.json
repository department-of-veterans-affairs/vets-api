{
  "openapi": "3.0.1",
  "info": {
    "title": "va.gov Representation Management API",
    "version": "1.0.0",
    "termsOfService": "https://developer.va.gov/terms-of-service",
    "description": "The API for managing representation for VA Forms 21-22 and 21-22a"
  },
  "tags": [
    {
      "name": "PDF Generation",
      "description": "Generate a PDF form from user input"
    },
    {
      "name": "Power of Attorney",
      "description": "Retrieves the Power of Attorney for a veteran, if any."
    }
  ],
  "components": {
    "schemas": {
      "Errors": {
        "type": "object",
        "required": [
          "errors"
        ],
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "Error": {
        "type": "string"
      },
      "PowerOfAttorneyResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "example": "123456"
              },
              "type": {
                "type": "string",
                "description": "Specifies the category of Power of Attorney (POA) representation.",
                "enum": [
                  "veteran_service_representatives",
                  "veteran_service_organizations"
                ]
              },
              "attributes": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "example": "organization",
                    "description": "Type of Power of Attorney representation",
                    "enum": [
                      "organization",
                      "representative"
                    ]
                  },
                  "name": {
                    "type": "string",
                    "example": "Veterans Association"
                  },
                  "address_line1": {
                    "type": "string",
                    "example": "1234 Freedom Blvd"
                  },
                  "city": {
                    "type": "string",
                    "example": "Arlington"
                  },
                  "state_code": {
                    "type": "string",
                    "example": "VA"
                  },
                  "zip_code": {
                    "type": "string",
                    "example": "22204"
                  },
                  "phone": {
                    "type": "string",
                    "example": "555-1234"
                  },
                  "email": {
                    "type": "string",
                    "example": "contact@example.org"
                  }
                },
                "required": [
                  "type",
                  "name",
                  "address_line1",
                  "city",
                  "state_code",
                  "zip_code"
                ]
              }
            }
          }
        }
      }
    },
    "responses": {
      "InternalServerError": {
        "description": "Unexpected server error",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "errors": {
                  "type": "object",
                  "properties": {
                    "title": {
                      "type": "string",
                      "example": "Internal server error"
                    },
                    "detail": {
                      "type": "string",
                      "example": "Unexpected error occurred"
                    },
                    "code": {
                      "type": "string",
                      "example": "500"
                    },
                    "status": {
                      "type": "string",
                      "example": "500"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "paths": {
    "/representation_management/v0/pdf_generator2122": {
      "post": {
        "summary": "Generate a PDF for form 21-22",
        "tags": [
          "PDF Generation"
        ],
        "operationId": "createPdfForm2122",
        "parameters": [

        ],
        "responses": {
          "200": {
            "description": "PDF generated successfully"
          },
          "422": {
            "description": "unprocessable entity response",
            "content": {
              "application/pdf": {
                "schema": {
                  "$ref": "#/components/schemas/Errors"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "organization_name": {
                    "type": "string",
                    "example": "Veterans Organization"
                  },
                  "record_consent": {
                    "type": "boolean",
                    "example": true
                  },
                  "consent_address_change": {
                    "type": "boolean",
                    "example": false
                  },
                  "consent_limits": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "example": [
                      "ALCOHOLISM",
                      "DRUG_ABUSE",
                      "HIV",
                      "SICKLE_CELL"
                    ]
                  },
                  "conditions_of_appointment": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "example": [
                      "a123",
                      "b456",
                      "c789"
                    ]
                  },
                  "claimant": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "object",
                        "properties": {
                          "first": {
                            "type": "string",
                            "example": "John"
                          },
                          "middle": {
                            "type": "string",
                            "example": "A"
                          },
                          "last": {
                            "type": "string",
                            "example": "Doe"
                          }
                        }
                      },
                      "address": {
                        "type": "object",
                        "properties": {
                          "address_line1": {
                            "type": "string",
                            "example": "123 Main St"
                          },
                          "address_line2": {
                            "type": "string",
                            "example": "Apt 1"
                          },
                          "city": {
                            "type": "string",
                            "example": "Springfield"
                          },
                          "state_code": {
                            "type": "string",
                            "example": "IL"
                          },
                          "country": {
                            "type": "string",
                            "example": "US"
                          },
                          "zip_code": {
                            "type": "string",
                            "example": "62704"
                          },
                          "zip_code_suffix": {
                            "type": "string",
                            "example": "1234"
                          }
                        }
                      },
                      "date_of_birth": {
                        "type": "string",
                        "format": "date",
                        "example": "12/31/2000"
                      },
                      "relationship": {
                        "type": "string",
                        "example": "Spouse"
                      },
                      "phone": {
                        "type": "string",
                        "example": "1234567890"
                      },
                      "email": {
                        "type": "string",
                        "example": "veteran@example.com"
                      }
                    }
                  },
                  "veteran": {
                    "type": "object",
                    "properties": {
                      "insurance_numbers": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "example": [
                          "123456789",
                          "987654321"
                        ]
                      },
                      "name": {
                        "type": "object",
                        "properties": {
                          "first": {
                            "type": "string",
                            "example": "John"
                          },
                          "middle": {
                            "type": "string",
                            "example": "A"
                          },
                          "last": {
                            "type": "string",
                            "example": "Doe"
                          }
                        }
                      },
                      "address": {
                        "type": "object",
                        "properties": {
                          "address_line1": {
                            "type": "string",
                            "example": "123 Main St"
                          },
                          "address_line2": {
                            "type": "string",
                            "example": "Apt 1"
                          },
                          "city": {
                            "type": "string",
                            "example": "Springfield"
                          },
                          "state_code": {
                            "type": "string",
                            "example": "IL"
                          },
                          "country": {
                            "type": "string",
                            "example": "US"
                          },
                          "zip_code": {
                            "type": "string",
                            "example": "62704"
                          },
                          "zip_code_suffix": {
                            "type": "string",
                            "example": "1234"
                          }
                        }
                      },
                      "ssn": {
                        "type": "string",
                        "example": "123456789"
                      },
                      "va_file_number": {
                        "type": "string",
                        "example": "123456789"
                      },
                      "date_of_birth": {
                        "type": "string",
                        "format": "date",
                        "example": "12/31/2000"
                      },
                      "service_number": {
                        "type": "string",
                        "example": "123456789"
                      },
                      "service_branch": {
                        "type": "string",
                        "example": "Army"
                      },
                      "service_branch_other": {
                        "type": "string",
                        "example": "Other Branch"
                      },
                      "phone": {
                        "type": "string",
                        "example": "1234567890"
                      },
                      "email": {
                        "type": "string",
                        "example": "veteran@example.com"
                      }
                    }
                  }
                },
                "required": [
                  "organization_name",
                  "record_consent",
                  "veteran"
                ]
              }
            }
          }
        }
      }
    },
    "/representation_management/v0/power_of_attorney": {
      "get": {
        "summary": "Get Power of Attorney",
        "tags": [
          "Power of Attorney"
        ],
        "description": "Retrieves the Power of Attorney for a veteran, if any.",
        "operationId": "getPowerOfAttorney",
        "responses": {
          "200": {
            "description": "Successfully checked for Power of Attorney information",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/PowerOfAttorneyResponse"
                    },
                    {
                      "type": "object",
                      "description": "An empty JSON object indicating no Power of Attorney exists.",
                      "example": {
                      }
                    }
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/responses/InternalServerError"
                }
              }
            }
          }
        }
      }
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Local server",
      "variables": {
        "version": {
          "default": "v1"
        }
      }
    },
    {
      "url": "https://sandbox-api.va.gov",
      "description": "VA.gov API sandbox environment",
      "variables": {
        "version": {
          "default": "v1"
        }
      }
    },
    {
      "url": "https://api.va.gov",
      "description": "VA.gov API production environment",
      "variables": {
        "version": {
          "default": "v1"
        }
      }
    }
  ]
}