{
	"name": "vets-api docker setup",
	"image": "mcr.microsoft.com/devcontainers/base:bullseye",

	"features": {
		"ghcr.io/devcontainers/features/docker-in-docker:2": {
			"moby": true,
			"azureDnsAutoDetection": true,
			"installDockerBuildx": true,
			"installDockerComposeSwitch": true,
			"version": "latest",
			"dockerDashComposeVersion": "latest"
		},
		"ghcr.io/devcontainers-contrib/features/ruby-asdf:0": {
			"version": "3.2.3"
		}
	},

	"portsAttributes": {
		"3000": {
			"label": "vets-api",
			"onAutoForward": "notify",
			"requireLocalPort": true
		}
	},

	"postCreateCommand": "sh .devcontainer/post-create.sh",
	"postStartCommand": "sh .devcontainer/post-start.sh",

	"customizations": {
		"codespaces": {
			"repositories": {
				"department-of-veterans-affairs/vets-api-mockdata": {
					"permissions": {
						"contents": "read",
						"pull_requests": "write"
					}
				}
			}
		},
	    "vscode": {
			"extensions": ["Shopify.ruby-lsp"]
		}
	}
}
