Veterans Benefits Administration (VBA) document uploads.

## Background

The Veterans Affairs’ Benefits Intake API allows for the submission of forms and documents to VA for eventual processing by the Veteran Benefits Administration.

Organizations external to the VA can these submit forms and supporting documentation on behalf of Veterans in PDF format and subsequently check the status of their submission to ensure acceptance and processing in the VA system of record for these forms. The process described below is specific to the Benefits Intake API and will be updated (with portions automated) for future APIs as VA iterates on this process.

The Document Upload API passes data through to ICMHS aka Benefits Intake API. Benefits Intake API accepts a payload consisting of a document in PDF format, zero or more optional attachments in PDF format, and some JSON metadata. The metadata describes the document, attachments, and identifies the person that the document relates to. This payload is encoded as multipart/form-data. A unique identifier supplied with the payload can be used to subsequently request the processing status of the uploaded document package.

API consumers are encouraged to validate the zipCode and fileNumber fields before submission according to their description in the DocumentUploadMetadata model.

## Design

### Authorization

API requests are authorized by means of a symmetric API token, provided in an HTTP header
with name "apikey".

### Upload Operation

Allows a client to upload a document package (form + attachments + metadata).

1. Client Request: POST https://dev-api.va.gov/services/vba_documents/v0/
    * No request body or parameters required

2. Service Response: A JSON API object with the following attributes:
    * `guid`: An identifier used for subsequent status requests
    * `location`: A URL to which the actual document package payload can be submitted
      in the next step. The URL is specific to this upload request and should not be
      re-used for subsequent uploads. The URL is valid for 900 seconds (15 minutes)
      from the time of this response.

3. Client Request: PUT to the location URL returned in Step 2.
    * Request body should be encoded as multipart/form-data, equivalent to that
      generated by an HTML form submission or using “curl -F…”. The format is
      described in more detail below.
    * No `apikey` authorization header is required for this request, as authorization is
      embedded in the signed location URL.

4. Service Response: The HTTP status indicates whether the upload was successful.
    Additionally, the response includes an ETag header containing an MD5 hash of the
    submitted payload. This can be compared to the submitted payload to ensure data
    integrity of the upload

### Status Simulation
Given the downstream connections of this API, we allow (**IN DEVELOPER ENVIRONMENT ONLY**) passing in a header `Status-Override` on the `/uploads/{id}` endpoint that will allow you to change the status of your submission to simulate the various scenarios. The available statuses are `pending`, `uploaded`, `received`, `processing`, `success`, `error`.

## Reference

Raw Open API Spec: https://api.va.gov/services/vba_documents/docs/v0/api
