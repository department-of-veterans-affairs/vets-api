---
http_interactions:
- request:
    method: post
    uri: "https://login.microsoftonline.us/fake_template_id/oauth2/token"
    body:
      encoding: UTF-8
      string: "client_id=fake_client_id&client_secret=fake_client_secret&client_type=1&scope=fake_scope&grant_type=client_credentials&resource=fake_resource"
    headers:
      Accept:
      - application/json
      Content-Type:
      - application/x-www-form-urlencoded
      User-Agent:
      - Vets.gov Agent
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 27 Aug 2025 21:54:27 GMT
      Content-Type:
      - application/json; charset=utf-8
      Connection:
      - keep-alive
      Cache-Control:
      - no-cache, no-store
      Pragma:
      - no-cache
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{
        "access_token": "fake_veis_token_123",
        "token_type": "Bearer",
        "expires_in": 3600
      }'
  recorded_at: Wed, 27 Aug 2025 21:54:27 GMT

- request:
    method: post
    uri: "https://dev.integration.d365.va.gov/api/v4/auth/system-access-token"
    body:
      encoding: UTF-8
      string: '{"secret":"fake_client_secret","icn":"1234567890V123456"}'
    headers:
      Accept:
      - application/json
      Content-Type:
      - application/json
      User-Agent:
      - Vets.gov Agent
      X-Correlation-ID:
      - e359e352-10d8-4475-a453-9feec6bb8a10
      BTSSS-API-Client-Number:
      - fake_client_number
      Authorization:
      - Bearer fake_veis_token_123
      Ocp-Apim-Subscription-Key:
      - fake_subscription_key
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 27 Aug 2025 21:54:27 GMT
      Content-Type:
      - application/json; charset=utf-8
      Connection:
      - keep-alive
      Cache-Control:
      - no-cache, no-store
      Pragma:
      - no-cache
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{
        "data": {
          "accessToken": "fake_btsss_token_456"
        }
      }'
  recorded_at: Wed, 27 Aug 2025 21:54:27 GMT

- request:
    method: post
    uri: "https://dev.integration.d365.va.gov/api/v3/appointments/find-or-add"
    body:
      encoding: UTF-8
      string: '{"appointmentDateTime":"2024-01-15T10:00:00Z","facilityStationNumber":"facility-123"}'
    headers:
      Accept:
      - application/json
      Content-Type:
      - application/json
      User-Agent:
      - Vets.gov Agent
      Authorization:
      - Bearer fake_veis_token_123
      X-BTSSS-Token:
      - fake_btsss_token_456
      X-Correlation-ID:
      - e359e352-10d8-4475-a453-9feec6bb8a10
      Ocp-Apim-Subscription-Key:
      - fake_subscription_key
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 27 Aug 2025 21:54:27 GMT
      Content-Type:
      - application/json; charset=utf-8
      Connection:
      - keep-alive
      X-Ratelimit-Remaining-Minute:
      - '59'
      X-Ratelimit-Limit-Minute:
      - '60'
      Ratelimit-Reset:
      - '25'
      Vary:
      - Origin
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Cache-Control:
      - no-cache, no-store
      Pragma:
      - no-cache
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{
        "correlationId": "e359e352-10d8-4475-a453-9feec6bb8a10",
        "timeStamp": "2025-08-27T21:54:27.178363Z",
        "statusCode": 200,
        "message": "Appointment found or created successfully",
        "success": true,
        "data": {
          "id": "appt-123"
        }
      }'
  recorded_at: Wed, 27 Aug 2025 21:54:27 GMT
