openapi: '3.0.0'
info:
  version: 0.0.1
  title: Veteran Verification
  description: |

    The Veteran Verification API allows you to confirm the Veteran status for a given person, or retrieve a Veteran's service history or disability rating.

    When confirming Veteran Status, the Status endpoint will return "Confirmed" or "Not Confirmed".

    ## Quickstart Guide

    ### 1. Get Access Credentials

    Get started by filling out the form on the [Apply for VA Lighthouse Developer Access](/apply) page. 
    
    After submitting a request, you will receive your credentials for using the API in the Development environment, which allows you to try it out with mock data before moving to the Production environment.
    
    ### 2. Test the  API
    
    In the endpoint documentation below, we've provided a curl command builder for trying out the API before implementation with your app.

    ### 3. Build your app

    The base URI for the Veteran Verification API in the Development environment is:

    https://dev-api.va.gov/services/veteran_verification/v0

    Check out some of our [sample apps](https://github.com/department-of-veterans-affairs/vets-api-clients/tree/master/samples/). Please visit our VA Lighthouse [Support portal](/support) should you need further assistance.

    ### 4. Show us a quick demo and get set up in the Production environment

    After building your app, we ask that you give us a quick demo before we set you up with production credentials. Please see the [Path to Production](/go-live) page for more details.

    ## Authorization
    This API uses the [OpenID Connect](https://openid.net/specs/openid-connect-core-1_0.html) standard (OAuth 2) to allow the person being confirmed to log in and provide digital consent. API requests are authorized using a Bearer token issued through an OpenID Connect service. The token should be submitted as an Authorization header in the form Bearer <token>.
    
    See our [Authorization Guide](/explore/verification/docs/authorization) for more details


    ## Reference
    
    ### Development vs. Production Data
    APIs accessed via the Development environment are using the same underlying logic as VAâ€™s production APIs; only the underlying data store is different.
  
    ### Rate Limiting
    We implemented basic rate limiting of 60 requests per minute. If you exceed this quota, your request will return a 429 status code. You may petition for increased rate limits by emailing, and requests will be decided on a case by case basis.
    
    ### Raw Open API Spec
    https://api.va.gov/services/veteran_verification/docs/v0/veteran_verification
  termsOfService: ''
  contact:
    name: VA.gov
servers:
  - url: https://dev-api.va.gov/services/veteran_verification/{version}
    description: VA.gov API development environment
    variables:
      version:
        default: v0
  - url: https://staging-api.va.gov/services/veteran_verification/{version}
    description: VA.gov API staging environment
    variables:
      version:
        default: v0
  - url: https://api.va.gov/services/veteran_verification/{version}
    description: VA.gov API production environment
    variables:
      version:
        default: v0
paths:
  /status:
    get:
      tags:
        - veteran_status
      summary: Get confirmation about an individual's Veteran status according to the VA
      operationId: getVeteranStatus
      security:
        - bearer_token: []
      responses:
        '200':
          description: Confirmation status successfully retrieved
          content:
            application/json:
              schema:
                required:
                  - data
                properties:
                  data:
                    $ref: '#/components/schemas/VeteranStatusConfirmation'
        '403':
          description: Provided Access Token Does not have the required scopes to access.
        '502':
          description: eMIS failed to respond or responded in a way we cannot handle. 
  /disability_rating:
    get:
      tags:
        - disability_rating
      summary: Retrieve disability rating of authorized Veteran
      operationId: getDisabilityRating
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Disability Rating retrieved successfully
          content:
            application/json:
              schema:
                required:
                  - data
                properties:
                  data:
                    $ref: '#/components/schemas/DisabilityRating'
        '404':
          description: No disability ratings found
  /service_history:
    get:
      tags:
        - service_history
      summary: Retrieve service history of authorized Veteran
      operationId: getServiceHistory
      security:
        - bearer_token: []
      responses:
        '200':
          description: Service History retrieved successfully
          content:
            application/json:
              schema:
                required:
                  - data
                properties:
                  data:
                    $ref: '#/components/schemas/ServiceHistoryEpisode'
        '404':
          description: No service history found
components:
  securitySchemes:
    bearer_token:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    DisabilityRating:
      description: |
        The disability rating percentage applied to the Veteran.
      required:
        - id
        - type
        - atttributes
      properties:
        id:
          description: JSON API identifier
          type: string
          example: 12303
        type:
          description: JSON API type specification
          type: string
          example: 'document_upload'
        attributes:
          $ref: '#/components/schemas/RatingAttributes'
    RatingAttributes:
      description: |
        Body of the disability rating response
      required:
        - decision
        - effective_date
        - rating_percentage
      properties:
        decision:
          description: Whether the disability is service connected or not.
          type: string
          example: 'Service Connected'
        effective_date:
          description: When the Veteran could begin claiming benefits related to this disability
          type: string
          format: datetime
          example: "2018-03-27T21:00:41.000+0000"
        rating_percentage:
          description: Severity rating determined by VA that indicates how disabling an illness or injury is for the Veteran. Used to help determine disability compensation (pay) and related benefits.
          type: number
          example: 50
    VeteranStatusConfirmation:
          description: |
            Veteran status confirmation for an individual
          type: object
          properties:
            id:
              type: string
              description: Confirmation UUID
              example: "833c6ffc-efef-4775-9355-f836b4f57501"
            type:
              type: string
              example: veteran_status_confirmations
            attributes:
              type: object
              properties:
                veteran_status:
                  type: string
                  description: |
                    Whether the system could confirm the Veteran status of the authorized individual
                  enum:
                    - confirmed
                    - not confirmed
    ServiceHistoryEpisode:
      description: |
        Service History for authorized Veteran
      type: object
      properties:
        id:
          type: string
          description: Service History Episode ID
          example: "12312AASDf"
        type:
          type: string
          example: service-history-episodes
        attributes:
          type: object
          properties:
            start_date:
              type: string
              format: date
              description: start date of a service history episode (YYYY-mm-dd)
              example: '1948-04-08'
            end_date:
              type: string
              format: date
              description: end date of a service history episode (YYYY-mm-dd)
              example: '1950-05-10'
            branch:
              type: string
              description: Branch of military including National Guard or Reserve status
              example: "Air Force"
            discharge_status:
              type: string
              description: |
                Character of discharge from service episode. Possible values are:

                Both "honorable-for-va-purposes" and "dishonorable-for-va-purposes" represent a change in character of discharge based on an administrative decision, for purposes of VA benefits administration. The original character of discharge for other purposes was either "bad-conduct" or "other-than-honorable". "honorable-absence-of-negative-report" represents an unreported character of service that DoD classifies as honorable.
              enum:
                - honorable
                - general
                - bad-conduct
                - other-than-honorable
                - dishonorable
                - honorable-absence-of-negative-report
                - honorable-for-va-purposes
                - dishonorable-for-va-purposes
                - uncharacterized
                - unknown
              example: honorable
            deployments:
              type: array
              items:
                $ref: '#/components/schemas/Deployment'
    Deployment:
      description: |
        Deployment during a service history episode
      type: object
      properties:
        start_date:
          type: string
          format: date
          description: beginning of deployment (YYYY-mm-dd)
          example: '1948-10-10'
        end_date:
          type: string
          format: date
          description: end of deployment (YYYY-mm-dd)
          example: '1949-10-09'
        location:
          type: string
          description: Three letter ISO country code of deployment location
          example: KOR